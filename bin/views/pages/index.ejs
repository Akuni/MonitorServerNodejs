<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>
</head>
<body class="container">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>

    <header>
        <% include ../partials/header %>
    </header>

    <main>
        <div class="jumbotron">
            <h1>This is great</h1>
            <p>Welcome to templating using EJS</p>
        </div>
        <canvas id="myChart"></canvas>
        <script type="text/javascript">
            var d = [];
            var l = [];
            for(var i = 0; i < temp.length ; i++){
                d[i] = temp[i].value.substring(6,10);
                l[i] = new Date(temp[i].timestamp).toLocaleString();
                
            }
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
              type: 'line',
              data: {
                labels: ['M', 'T', 'W', 'T', 'F', 'S', 'S'],
                datasets: [{
                  label: 'Temp',
                  data: [12, 19, 3, 17, 6, 3, 7],
                  backgroundColor: "rgba(153,255,51,0.4)"
                }]
              }
            });
        </script>

        <table class="custom_table">
            <tr>
                <td>
                    Date
                </td>
                <td>
                    Temp
                </td>
            </tr>
            <% temp.forEach(function(t) { %>
                <tr>
                    <td>
                        <%= new Date(t.timestamp).toLocaleString() %>
                    </td>
                    <td> 
                        <%= t.value %>
                    </td>
                </tr>
            <% }); %>
        </table>
    </main>

    <footer>
        <% include ../partials/footer %>
    </footer>
    
</body>
</html>